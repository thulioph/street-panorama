"use strict";angular.module("streetViewApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap","rzModule"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("streetViewApp").config(["$httpProvider",function(a){a.defaults.useXDomain=!0,delete a.defaults.headers.common["X-Requested-With"]}]).constant("AppConfig",{API_STREETVIEW:"https://maps.googleapis.com/maps/api/streetview",API_GEOCODE:"https://maps.googleapis.com/maps/api/geocode/",DISTANCE_KEY:"AIzaSyDhYgr3oSOFPtTNynI7fOxMxJkU2LPQnQk",LANGUAGE:"pt-BR",DIRECTIONS_KEY:"AIzaSyCWmTGDejJLsv4LLNv2T8qkiazU5Y5l4X4"}),angular.module("streetViewApp").controller("MainCtrl",["$scope","Gmaps","$http",function(a,b,c){function d(){navigator.geolocation?(console.log("Get userlocation..."),navigator.geolocation.getCurrentPosition(e,f)):window.alert("Geolocation is not supported.")}function e(b){a.location={lat:b.coords.latitude,lng:b.coords.longitude},a.$broadcast("pick_my_location"),a.$broadcast("im_here")}function f(a){window.alert("Error: ",a)}function g(a){var b={lat:a.lat,lng:a.lng},c=new google.maps.Map(document.getElementById("map"),{center:b,zoom:14}),d=new google.maps.StreetViewPanorama(document.getElementById("panoramic"),{position:b,pov:{heading:34,pitch:10}});c.setStreetView(d)}function h(){new google.maps.StreetViewPanorama(document.getElementById("map_panoramic"),{pano:"reception",visible:!0,panoProvider:j})}function i(b,c,d,e){return a.view.url}function j(a,b,c,d){return"reception"===a?{location:{pano:"reception",description:"Google Sydney - Reception"},links:[],copyright:"Imagery (c) 2010 Google",tiles:{tileSize:new google.maps.Size(1024,512),worldSize:new google.maps.Size(1024,512),centerHeading:105,getTileUrl:i}}:void 0}function k(){a.range.size={},a.range.size.value="400",a.range.fov={},a.range.fov.value="90",a.range.heading={},a.range.heading.value="235",a.range.pintch={},a.range.pintch.value="10"}a.v_data="",a.autoComplete=function(a){return c.get("//maps.googleapis.com/maps/api/geocode/json",{params:{address:a,sensor:!1,language:"pt-BR"}}).then(function(a){return console.log(a),a.data.results.map(function(a){return a.formatted_address})})},a.getAddress=function(c){var d=c;b.geocode(d,function(b){var c=b.results[0].geometry.location;a.coords=c,g(c),k()})},a.pickMyLocation=function(){d()},a.$on("pick_my_location",function(){g(a.location)}),a.setRangeValues=function(){a.range={fov:{value:90,options:{floor:90,ceil:120}},heading:{value:180,options:{floor:0,ceil:360}},pitch:{value:1,options:{floor:0,ceil:180}},size:{value:360,options:{floor:0,ceil:1024}}}},a.setRangeValues(),a.ImHere=function(){d()},a.$on("im_here",function(){a.coords=a.location,k(),a.$apply()}),a.view={},a.getPanoramica=function(){a.view.url;h()}}]),angular.module("streetViewApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("streetViewApp").service("Gmaps",["$http","AppConfig",function(a,b){var c=b.API_GEOCODE,d={};return d.geocode=function(b,d){a.get(c+"json?address="+b).success(function(a){console.log("Success geocode: ",a),d(a)}).error(function(a){console.log("Error geocode: ",a)})},d}]),angular.module("streetViewApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title">Google Street View Image API</h3> </div> <div class="panel-body"> <div ng-include src="\'../views/partials/g_streetview_image.html\'"></div> </div> </div> <br><br> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title">Google Street View Service</h3> </div> <div class="panel-body"> <div ng-include src="\'../views/partials/g_streetview_service.html\'"></div> </div> </div> <br><br> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title">Custom Street View panoramas</h3> </div> <div class="panel-body"> <div ng-include src="\'../views/partials/g_streetview_custom.html\'"></div> </div> </div>'),a.put("views/partials/g_streetview_custom.html",'<div class="alert alert-info" role="alert"> Link para documentação <a href="https://developers.google.com/maps/documentation/javascript/examples/streetview-custom-simple">aqui</a>. </div> <!-- map --> <form ng-submit="getPanoramica()"> <fieldset class="form-group"> <label for="url">Url</label> <input type="text" placeholder="https://farm6.staticflickr.com/5779/22770454046_0d5908575c_k.jpg" id="url" ng-model="view.url" class="form-control"> </fieldset> <fieldset class="form-group"> <button class="btn btn-primary">importar url</button> </fieldset> </form> <div class="col-xs-12 box"> <aside id="map_panoramic"></aside> </div> <br>'),a.put("views/partials/g_streetview_image.html",'<div class="alert alert-info" role="alert"> Link para documentação <a href="https://developers.google.com/maps/documentation/streetview/intro?hl=pt-br">aqui</a>. </div> <br> <form> <fieldset class="form-group"> <label>Tamanho</label> <br><span>Define o tamanho da imagem</span> <rzslider rz-slider-model="range.size.value" rz-slider-options="range.size.options"></rzslider> </fieldset> <rzslider rz-slider-model="range.size.value" rz-slider-options="range.size.options"></rzslider>  <br> <fieldset class="form-group"> <label>Heading</label> <br><span>Define o ângulo de rotação da imagem horizontalmente</span> <rzslider rz-slider-model="range.heading.value" rz-slider-options="range.heading.options"></rzslider> </fieldset> <br> <fieldset class="form-group"> <label>Pitch</label> <br><span>Define o ângulo de rotação da verticalmente</span> <rzslider rz-slider-model="range.pitch.value" rz-slider-options="range.pitch.options"></rzslider> </fieldset> <br> <fieldset class="form-group"> <label>Fov</label> <br><span>Define o "nível de zoom" da imagem</span> <rzslider rz-slider-model="range.fov.value" rz-slider-options="range.fov.options"></rzslider> </fieldset> <br> <fieldset class="form-group"> <label for="address">Endereço</label> <input autocomplete="off" type="text" class="form-control" id="address" uib-typeahead="address for address in autoComplete($viewValue)" ng-model="$viewValue" typeahead-on-select="getAddress($item)"> </fieldset> <br> <fieldset class="form-group"> <button class="btn btn-primary" ng-click="ImHere()">pegar minha localização</button> </fieldset> </form> <br><br> <figure> <img ng-src="https://maps.googleapis.com/maps/api/streetview?size={{range.size.value}}x{{range.size.value}}&location={{coords.lat}},{{coords.lng}}&fov={{range.fov.value}}&heading={{range.heading.value}}&pitch={{range.pitch.value}}&key=AIzaSyBphP6jOsoGcoMNUqwGG5MQ75tR4IlJckI" alt="Imagem"> </figure>'),a.put("views/partials/g_streetview_service.html",'<div class="alert alert-info" role="alert"> Link para documentações <a href="https://developers.google.com/maps/documentation/javascript/examples/streetview-simple">aqui</a> e <a href="https://developers.google.com/maps/documentation/geocoding/intro">aqui</a>. </div> <br> <form> <fieldset class="form-group"> <label for="address">Endereço</label> <input autocomplete="off" type="text" class="form-control" id="address" uib-typeahead="address for address in autoComplete($viewValue)" ng-model="$viewValue" typeahead-on-select="getAddress($item)"> </fieldset> <button ng-click="pickMyLocation()" class="btn btn-primary">minha localização</button> </form> <br><br><br> <!-- map --> <div class="col-xs-12 col-sm-6 box"> <aside id="map"></aside> </div> <!-- panoramic --> <div class="col-xs-12 col-sm-6 box"> <aside id="panoramic"></aside> </div>')}]);